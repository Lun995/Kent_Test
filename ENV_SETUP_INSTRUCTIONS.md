# 環境變數設定說明

## 🚨 重要：解決 API 連接問題

您的應用程式目前無法連接到後端 API，請按照以下步驟設定：

### 步驟 1: 創建環境變數檔案

在專案根目錄（與 `package.json` 同級）創建 `.env.local` 檔案：

```bash
# 後端 API 基礎 URL (本地開發環境)
BACKEND_API_URL=http://localhost:5000

# API 超時設定 (毫秒)
API_TIMEOUT=30000

# API 重試次數
API_RETRY_ATTEMPTS=3

# API 快取啟用
API_CACHE_ENABLED=true

# 環境設定
NODE_ENV=development
```

### 步驟 2: 確認後端服務運行

1. **檢查後端專案**：確認您的後端專案是否正在運行
2. **檢查端口**：確認 5000 端口是否有服務監聽
3. **檢查 URL**：在瀏覽器訪問 `http://localhost:5000/swagger/index.html`

### 步驟 3: 重新啟動開發伺服器

```bash
# 停止目前的開發伺服器 (Ctrl+C)
# 然後重新啟動
npm run dev
```

## 🔧 故障排除

### 如果仍然無法連接：

1. **檢查後端服務狀態**：
   - 確認後端專案是否編譯成功
   - 確認是否有錯誤訊息
   - 確認 5000 端口是否被其他服務佔用

2. **檢查防火牆設定**：
   - Windows 防火牆是否阻擋 5000 端口
   - 防毒軟體是否阻擋連接

3. **嘗試其他端口**：
   - 如果 5000 端口有問題，可以嘗試 3000、8080 等

4. **檢查網路配置**：
   - 確認 localhost 解析正常
   - 嘗試使用 `127.0.0.1:5000` 替代 `localhost:5000`

## 📝 常見問題

### Q: 為什麼要從 HTTPS 改為 HTTP？
A: 本地開發環境通常不需要 HTTPS，使用 HTTP 可以避免憑證問題。

### Q: 如何確認後端服務正在運行？
A: 在瀏覽器訪問 `http://localhost:5000/swagger/index.html`，如果能看到 Swagger 頁面，表示服務正常。

### Q: 環境變數設定後需要重新啟動嗎？
A: 是的，Next.js 需要重新啟動才能載入新的環境變數。

## ✅ 設定完成後

設定完成後，您的應用程式應該能夠：
1. 成功連接到 `http://localhost:5000`
2. 呼叫工作站 API 端點
3. 獲取工作站資料並顯示在介面上

如果仍有問題，請檢查：
1. 環境變數檔案是否正確創建
2. 後端服務是否在指定端口運行
3. 瀏覽器控制台是否有錯誤訊息
